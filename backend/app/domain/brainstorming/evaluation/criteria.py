"""
평가 기준 및 가중치 정의
"""

from typing import Dict

# 가중치 (모두 20% 균등)
WEIGHTS: Dict[str, float] = {
    "rag_utilization": 0.20,   # RAG 활용도
    "completeness": 0.20,      # 답변 완성도
    "relevance": 0.20,         # 질문-답변 연관도
    "creativity": 0.20,        # 창의성
    "practicality": 0.20,      # 실용성
}


# 평가 기준 상세 설명
EVALUATION_CRITERIA = {
    "rag_utilization": {
        "name": "RAG 활용도",
        "description": "RAG 컨텍스트를 답변에 얼마나 효과적으로 활용했는가?",
        "rubric": {
            "10": "Permanent RAG 기법(SCAMPER 등)을 명시적으로 적용하고, Ephemeral RAG 키워드를 아이디어에 자연스럽게 통합함",
            "7-9": "RAG 컨텍스트를 암묵적으로 반영하되, 명시적 언급은 없음",
            "4-6": "RAG 컨텍스트의 일부만 사용하거나 표면적으로만 반영",
            "1-3": "RAG 컨텍스트를 거의 사용하지 않고 일반적인 답변 생성"
        }
    },
    "completeness": {
        "name": "답변 완성도",
        "description": "요청한 내용을 충분히 제공했는가?",
        "rubric": {
            "10": "5개 이상의 아이디어 + 각각 상세한 SWOT 분석 + 실행 단계 포함",
            "7-9": "3개 아이디어 + 완전한 SWOT 분석 (4개 항목 모두)",
            "4-6": "2-3개 아이디어 + 불완전한 SWOT (일부 항목 누락)",
            "1-3": "1-2개 아이디어만 제공하거나 SWOT 없음"
        }
    },
    "relevance": {
        "name": "질문-답변 연관도",
        "description": "질문 의도를 정확히 이해하고 답변했는가?",
        "rubric": {
            "10": "질문의 모든 요소(목적, 맥락, 제약 조건)를 완벽히 반영",
            "7-9": "질문의 핵심 의도는 파악했으나 일부 세부 요소 누락",
            "4-6": "질문과 관련은 있으나 방향이 약간 빗나감",
            "1-3": "질문 의도를 잘못 이해하거나 엉뚱한 답변"
        }
    },
    "creativity": {
        "name": "창의성",
        "description": "독창적이고 새로운 아이디어인가?",
        "rubric": {
            "10": "업계에 없던 완전히 새로운 접근, 놀라운 조합, 파괴적 혁신",
            "7-9": "기존 아이디어에 참신한 변형 추가, 차별화 요소 명확",
            "4-6": "일반적인 아이디어지만 약간의 변형 시도",
            "1-3": "너무 흔하고 뻔한 아이디어, 차별화 없음"
        }
    },
    "practicality": {
        "name": "실용성",
        "description": "현실적으로 실행 가능한가?",
        "rubric": {
            "10": "즉시 실행 가능, 구체적인 도구/방법 제시, 낮은 진입 장벽",
            "7-9": "며칠~몇 주 내 실행 가능, 현실적인 비용/시간",
            "4-6": "실행 가능하지만 준비 기간/비용 필요",
            "1-3": "비현실적이거나 실행 방법 불명확"
        }
    }
}


def validate_weights():
    """가중치 합이 1.0인지 검증"""
    total = sum(WEIGHTS.values())
    assert abs(total - 1.0) < 0.001, f"가중치 합이 1.0이 아닙니다: {total}"
    print(f"✅ 가중치 검증 완료: {total}")


# 모듈 로드 시 검증
validate_weights()

